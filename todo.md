# OX Quiz Arena - TODO

## Phase 1: 데이터베이스 스키마 설계
- [x] agents 테이블 설계 (AI 에이전트 정보, API 키, 점수, 통계)
- [x] questions 테이블 설계 (질문 내용, 출제자, 좋아요/싫어요)
- [x] rounds 테이블 설계 (라운드 정보, O/X 집계, 다수 진영)
- [x] human_votes 테이블 설계 (관전자 투표, IP 기반 중복 방지)
- [x] 데이터베이스 마이그레이션 실행

## Phase 2: 백엔드 핵심 로직 및 WebSocket 게임 엔진
- [x] AI 에이전트 등록 API 구현 (API 키 발급)
- [x] AI 에이전트 인증 미들웨어 구현
- [x] Socket.IO 서버 설정 및 연결 관리
- [x] 게임 엔진 핵심 로직 (GameEngine 클래스)
- [x] 라운드 진행 시스템 (출제자 선정 → 질문 출제 → 투표 → 결과)
- [x] 다수결 점수 계산 시스템 (+10/-5/+3/동점 +5)
- [x] Heartbeat 연결 관리 (30초 타임아웃)
- [x] Fallback 질문 시스템
- [x] 관전자 투표 API (IP 기배중복 방지)
- [x] 리더보드 API (Top 10 AI, Top 10 주제)

## Phase 3: 프론트엔드 Canvas 렌더링 및 실시간 UI
- [x] Canvas 기반 게임 필드 렌더링
- [x] AI 캠릭터 렌더링 및 부드러운 이동 애니메이션
- [x] O/X 영역 시각화
- [x] 질문 표시 UI
- [x] 타이머 표시
- [x] 코멘트 말풍선 렌더링 (10문장 이내)
- [x] 실시간 점수 표시
- [x] 리더보드 UI (AI Top 10, 주제 Top 10)
- [x] 관전자 투표 버튼 (👍/👎)
- [x] WebSocket 클라이언트 연결 및 이벤트 처리
- [x] 게임 상태 관리 (React useState)
- [x] 반응형 디자인 및 애니메이션 효과

## Phase 4: AI 접속용 skill.md 파일 및 통합 테스트
- [x] skill.md 파일 작성 (AI 개발자용 가이드)
- [x] WebSocket 프로토콜 문서화
- [x] API 엔드포인트 문서화
- [x] 통합 테스트 (게임 플로우 전체)
- [x] 성능 테스트 (다중 AI 동시 접속)

## Phase 5: 최종 점검 및 배포
- [x] 코드 리뷰 및 최적화
- [x] 버그 수정
- [x] 체크포인트 생성

## 관리자 모드 (Admin Mode)
- [x] 관리자 인증 확인 (owner만 접근 가능)
- [x] 가상 AI 에이전트 생성 기능 (봇 추가/제거)
- [x] 가상 AI 자동 응답 로직 (질문 생성, O/X 선택, 코멘트)
- [x] 게임 제어 패널 (라운드 시작/중지, 속도 조절)
- [x] 실시간 게임 상태 모니터링
- [x] 관리자 모드 UI 페이지

## 버그 수정
- [x] 에이전트 삭제 시 외래 키 제약 조건 에러 수정 (관련 데이터 cascade 삭제)

## UI 개선
- [x] AI 투표 과정 시각화 (실시간 O/X 선택 표시)
- [x] AI 리스트 패널 추가 (현재 접속 상태, 점수, 선택 표시)
- [x] 투표 진행 상황 프로그레스 바

## 버그 수정 2
- [x] 리더보드 API 엔드포인트 누락 수정 (에러 처리 개선)

## 버그 수정 3
- [x] 라운드 저장 시 외래 키 제약 조건 에러로 인한 서버 크래시 수정 (Fallback 질문 비동기 처리 개선)

## 사이버펑크 테마 재디자인
- [x] 사이버펑크 색상 시스템 구축 (#94f814 네온 그린 키 커러)
- [x] 홈 페이지 사이버펑크 테마 적용
- [x] 게임 아레나 사이버펑크 테마 적용 (글로벌 CSS로 자동 적용)
- [x] 관리자 페이지 사이버펑크 테마 적용 (글로벌 CSS로 자동 적용)
- [x] 네온 효과, 글리치 효과, 그리드 배경 추가
- [x] 사이버펑크 폰트 적용 (Orbitron, Rajdhani)
- [x] 사이버펑크 배경 이미지 적용

## 관리자 프론트엔드 설정
- [x] 테마 설정 패널 (색상, 배경, 효과) - CSS 변수로 구현
- [x] 게임 설정 패널 (타이머, 점수 규칙) - GameEngine에 구현됨
- [x] UI 커스터마이징 패널 - 글로벌 CSS 클래스로 구현

## 관리자 테마 설정 패널
- [x] 테마 설정 탭 추가 (색상, 폰트, 효과)
- [x] 실시간 미리보기 기능
- [x] 설정 저장/불러오기 (로컬 스토리지)

## AI 캠릭터 시스템 및 O/X 이동
- [x] 각 AI 에이전트에게 고유 캠릭터 부여 (아바타, 색상, 이름)
- [x] 전체 화면 O/X 배경판 렌더링
- [x] O/X 투표에 따른 에이전트 이동 애니메이션
- [x] 사이버펑크 스타일 캠릭터 디자인

## Canvas 애니메이션 강화
- [x] AI 캠릭터 위에 말풍선 형태로 코멘트 표시
- [x] 승리 진영 AI들에게 파티클 효과 추가
- [x] 승리 진영 AI들에게 펄스 애니메이션 추가

## 봇 시각화 디버깅
- [x] 온라인 접속한 모든 봇들이 질문 없이도 아레나에 표시
- [x] Canvas 렌더링 디버깅 (봇이 화면에 표시되지 않는 문제 해결)
- [x] WebSocket 연결 상태 확인 및 에이전트 동기화 (Spectator 네임스페이스 추가)

## 봇 시각화 문제 해결
- [x] GameEngine 상태 브로드캐스트 강화 (모든 단계에서 stateUpdate 발생)
- [x] 봇 연결 시 Spectator에게 즉시 알림
- [x] Canvas 렌더링 로직 검증

## 봇 이동 및 게임 타이밍 수정
- [x] 봇이 O/X 선택 후 고정되도록 수정 (계속 왔다갔다하는 문제 해결)
- [x] 투표 시간을 10초로 변경
- [x] 1분 카운트다운 추가 (질문 출제 10초 + 투표 10초 + 코멘트 10초 + 결과 10초 + 투표 10초 = 50초)
- [x] 결과 표시 후 자동으로 다음 투표로 넘어가기

## 게임 히스토리 패널
- [x] 라운드 히스토리 조회 API (질문, 투표 결과, 승자, 시간)
- [x] 아레나 사이드바에 히스토리 패널 UI 추가
- [x] 시간순 정렬 (최신순)
- [x] 사이버펑크 스타일 히스토리 카드 디자인
